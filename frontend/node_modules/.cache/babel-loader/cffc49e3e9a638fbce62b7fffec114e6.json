{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Tarea3\\\\frontend\\\\src\\\\components\\\\ProfessionalDashboard.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"./AuthContext\";\nconst ProfessionalDashboard = () => {\n  const [requests, setRequests] = useState([]);\n  const {\n    professionalId\n  } = useAuth();\n  useEffect(() => {\n    const fetchRequests = async () => {\n      if (professionalId) {\n        try {\n          const response = await fetch(`http://localhost/Tarea3/backend/src/index.php/professionalRequests/${professionalId}`);\n          if (!response.ok) {\n            throw new Error(\"Network response was not ok\");\n          }\n          const data = await response.json();\n          setRequests(data);\n        } catch (error) {\n          console.error(\"There was an error fetching the service requests:\", error);\n        }\n      }\n    };\n    fetchRequests();\n  }, [professionalId]);\n  const updateRequestStatus = async (reservaId, status) => {\n    try {\n      const response = await fetch(`http://localhost/Tarea3/backend/src/index.php/updateRequest/${reservaId}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          status\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) throw new Error(data.message || \"An error occurred\");\n\n      // Refresh the list of requests\n      setRequests(requests.map(request => request.reserva_id === reservaId ? {\n        ...request,\n        estado: status\n      } : request));\n    } catch (error) {\n      console.error(\"There was an error updating the service request:\", error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, \"Service Requests\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }\n  }, requests.length > 0 ? requests.map(request => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    key: request.reserva_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"service-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 17\n    }\n  }, request.servicio_name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, request.description), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 17\n    }\n  }, \"Requested by: \", request.usuario_name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, \"Status: \", request.estado), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => updateRequestStatus(request.reserva_id, \"accepted\"),\n    className: \"btn cmn-btn btn-spacing-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 19\n    }\n  }, \"Accept\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => updateRequestStatus(request.reserva_id, \"rejected\"),\n    className: \"btn cmn-btn btn-spacing-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 19\n    }\n  }, \"Reject\"))))) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  }, \"No service requests found.\")), /*#__PURE__*/React.createElement(\"style\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }\n  }, `\n       .btn-spacing-right {\n        margin-right: 10px;\n      }\n      `));\n};\nexport default ProfessionalDashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","ProfessionalDashboard","requests","setRequests","professionalId","fetchRequests","response","fetch","ok","Error","data","json","error","console","updateRequestStatus","reservaId","status","method","headers","body","JSON","stringify","message","map","request","reserva_id","estado","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","length","key","servicio_name","description","usuario_name","onClick"],"sources":["C:/xampp/htdocs/Tarea3/frontend/src/components/ProfessionalDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\n\r\nconst ProfessionalDashboard = () => {\r\n  const [requests, setRequests] = useState([]);\r\n  const { professionalId } = useAuth();\r\n\r\n  useEffect(() => {\r\n    const fetchRequests = async () => {\r\n      if (professionalId) {\r\n        try {\r\n          const response = await fetch(\r\n            `http://localhost/Tarea3/backend/src/index.php/professionalRequests/${professionalId}`\r\n          );\r\n          if (!response.ok) {\r\n            throw new Error(\"Network response was not ok\");\r\n          }\r\n          const data = await response.json();\r\n          setRequests(data);\r\n        } catch (error) {\r\n          console.error(\r\n            \"There was an error fetching the service requests:\",\r\n            error\r\n          );\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchRequests();\r\n  }, [professionalId]);\r\n\r\n  const updateRequestStatus = async (reservaId, status) => {\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost/Tarea3/backend/src/index.php/updateRequest/${reservaId}`,\r\n        {\r\n          method: \"PATCH\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ status }),\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.message || \"An error occurred\");\r\n\r\n      // Refresh the list of requests\r\n      setRequests(\r\n        requests.map((request) =>\r\n          request.reserva_id === reservaId\r\n            ? { ...request, estado: status }\r\n            : request\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error(\"There was an error updating the service request:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2 className=\"section-title\">Service Requests</h2>\r\n      <div className=\"row\">\r\n        {requests.length > 0 ? (\r\n          requests.map((request) => (\r\n            <div className=\"col-lg-12\" key={request.reserva_id}>\r\n              <div className=\"service-item\">\r\n                <h3>{request.servicio_name}</h3>\r\n                <p>{request.description}</p>\r\n                <p>Requested by: {request.usuario_name}</p>\r\n                <p>Status: {request.estado}</p>\r\n                <div>\r\n                  <button\r\n                    onClick={() =>\r\n                      updateRequestStatus(request.reserva_id, \"accepted\")\r\n                    }\r\n                    className=\"btn cmn-btn btn-spacing-right\"\r\n                  >\r\n                    Accept\r\n                  </button>\r\n                  <button\r\n                    onClick={() =>\r\n                      updateRequestStatus(request.reserva_id, \"rejected\")\r\n                    }\r\n                    className=\"btn cmn-btn btn-spacing-right\"\r\n                  >\r\n                    Reject\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <p className=\"text-center\">No service requests found.</p>\r\n        )}\r\n      </div>\r\n      <style>{`\r\n       .btn-spacing-right {\r\n        margin-right: 10px;\r\n      }\r\n      `}</style>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfessionalDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}