{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\Tarea3\\\\frontend\\\\src\\\\components\\\\ProfessionalDashboard.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { useAuth } from \"./AuthContext\";\nconst ProfessionalDashboard = () => {\n  const [requests, setRequests] = useState([]);\n  const {\n    authState\n  } = useAuth();\n  const usu = authState === null || authState === void 0 ? void 0 : authState.usuario_id;\n  console.log(\"AuthState:\", authState);\n  console.log(\"profesionalId: \" + profesionalId);\n  useEffect(() => {\n    const fetchRequests = async () => {\n      if (authState && authState.profesionalId) {\n        try {\n          const response = await fetch(`http://localhost/Tarea3/backend/src/index.php/professionalRequests/${authState === null || authState === void 0 ? void 0 : authState.usuario_id}`);\n          if (!response.ok) {\n            throw new Error(\"Network response was not ok\");\n          }\n          const data = await response.json();\n          console.log(\"data: \" + data);\n          setRequests(data);\n        } catch (error) {\n          console.error(\"There was an error fetching the service requests:\", error);\n        }\n      }\n    };\n    fetchRequests();\n  }, [authState]);\n  const updateRequestStatus = async (reservaId, status) => {\n    try {\n      const response = await fetch(`http://localhost/Tarea3/backend/src/index.php/updateRequest/${reservaId}`, {\n        method: \"PATCH\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          status\n        })\n      });\n      const data = await response.json();\n      if (!response.ok) throw new Error(data.message || \"An error occurred\");\n\n      // Refresh the list of requests\n      setRequests(requests.map(request => request.reserva_id === reservaId ? {\n        ...request,\n        estado: status\n      } : request));\n    } catch (error) {\n      console.error(\"There was an error updating the service request:\", error);\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: \"section-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }\n  }, \"Service Requests\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, requests.length > 0 ? requests.map(request => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    key: request.reserva_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"service-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, request.servicio_name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 17\n    }\n  }, request.description), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 17\n    }\n  }, \"Requested by: \", request.usuario_name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, \"Status: \", request.estado), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => updateRequestStatus(request.reserva_id, \"accepted\"),\n    className: \"btn cmn-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 19\n    }\n  }, \"Accept\"), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => updateRequestStatus(request.reserva_id, \"rejected\"),\n    className: \"btn cmn-btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 19\n    }\n  }, \"Reject\"))))) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"text-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 11\n    }\n  }, \"No service requests found.\")));\n};\nexport default ProfessionalDashboard;","map":{"version":3,"names":["React","useState","useEffect","useAuth","ProfessionalDashboard","requests","setRequests","authState","usu","usuario_id","console","log","profesionalId","fetchRequests","response","fetch","ok","Error","data","json","error","updateRequestStatus","reservaId","status","method","headers","body","JSON","stringify","message","map","request","reserva_id","estado","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","length","key","servicio_name","description","usuario_name","onClick"],"sources":["C:/xampp/htdocs/Tarea3/frontend/src/components/ProfessionalDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useAuth } from \"./AuthContext\";\r\n\r\nconst ProfessionalDashboard = () => {\r\n  const [requests, setRequests] = useState([]);\r\n  const { authState } = useAuth();\r\n\r\n  const usu = authState?.usuario_id;\r\n  console.log(\"AuthState:\", authState);\r\n  console.log(\"profesionalId: \" + profesionalId);\r\n\r\n  useEffect(() => {\r\n    const fetchRequests = async () => {\r\n      if (authState && authState.profesionalId) {\r\n        try {\r\n          const response = await fetch(\r\n            `http://localhost/Tarea3/backend/src/index.php/professionalRequests/${authState?.usuario_id}`\r\n          );\r\n          if (!response.ok) {\r\n            throw new Error(\"Network response was not ok\");\r\n          }\r\n          const data = await response.json();\r\n\r\n          console.log(\"data: \" + data);\r\n          setRequests(data);\r\n        } catch (error) {\r\n          console.error(\r\n            \"There was an error fetching the service requests:\",\r\n            error\r\n          );\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchRequests();\r\n  }, [authState]);\r\n\r\n  const updateRequestStatus = async (reservaId, status) => {\r\n    try {\r\n      const response = await fetch(\r\n        `http://localhost/Tarea3/backend/src/index.php/updateRequest/${reservaId}`,\r\n        {\r\n          method: \"PATCH\",\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          body: JSON.stringify({ status }),\r\n        }\r\n      );\r\n      const data = await response.json();\r\n      if (!response.ok) throw new Error(data.message || \"An error occurred\");\r\n\r\n      // Refresh the list of requests\r\n      setRequests(\r\n        requests.map((request) =>\r\n          request.reserva_id === reservaId\r\n            ? { ...request, estado: status }\r\n            : request\r\n        )\r\n      );\r\n    } catch (error) {\r\n      console.error(\"There was an error updating the service request:\", error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2 className=\"section-title\">Service Requests</h2>\r\n      <div className=\"row\">\r\n        {requests.length > 0 ? (\r\n          requests.map((request) => (\r\n            <div className=\"col-lg-12\" key={request.reserva_id}>\r\n              <div className=\"service-item\">\r\n                <h3>{request.servicio_name}</h3>\r\n                <p>{request.description}</p>\r\n                <p>Requested by: {request.usuario_name}</p>\r\n                <p>Status: {request.estado}</p>\r\n                <div>\r\n                  <button\r\n                    onClick={() =>\r\n                      updateRequestStatus(request.reserva_id, \"accepted\")\r\n                    }\r\n                    className=\"btn cmn-btn\"\r\n                  >\r\n                    Accept\r\n                  </button>\r\n                  <button\r\n                    onClick={() =>\r\n                      updateRequestStatus(request.reserva_id, \"rejected\")\r\n                    }\r\n                    className=\"btn cmn-btn\"\r\n                  >\r\n                    Reject\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))\r\n        ) : (\r\n          <p className=\"text-center\">No service requests found.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfessionalDashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}